{"version":3,"file":"bundle.js","mappings":";;;;;;;;;;;;;;;;;;;;AAAA;AAEA;AACA;AACA;AACA;AACA;;AACO,IAAMI,mBAAmB,GAAG,SAAtBA,mBAAsB,CAACC,GAAD,EAAS;EAC1C,IAAMC,MAAM,GAAGC,QAAQ,CAACC,aAAT,CAAuB,YAAvB,CAAf;EACAC,qBAAqB;;EACrBH,MAAM,CAACI,OAAP,GAAiB,UAACC,CAAD,EAAO;IACtB,IAAMC,KAAK,GAAGL,QAAQ,CAACC,aAAT,CAAuB,iBAAvB,CAAd;;IACA,IAAI,CAACI,KAAK,CAACC,KAAN,CAAYC,IAAZ,EAAL,EAAyB;MACvB,IAAMC,QAAQ,GAAGR,QAAQ,CAACC,aAAT,CAAuB,yBAAvB,CAAjB;MACAO,QAAQ,CAACC,WAAT,GAAuB,kBAAvB;IACD,CAHD,MAGOhB,wDAAK,CAACK,GAAD,CAAL;EACR,CAND;AAOD,CAVM;AAYP;AACA;AACA;AACA;AACA;;AACO,IAAMI,qBAAqB,GAAG,SAAxBA,qBAAwB,GAAM;EACzC,IAAMG,KAAK,GAAGL,QAAQ,CAACC,aAAT,CAAuB,iBAAvB,CAAd;EACAI,KAAK,CAACK,gBAAN,CAAuB,QAAvB,EAAiC,UAACN,CAAD,EAAO;IACtCO,OAAO,CAACC,GAAR,CAAYR,CAAC,CAACS,MAAF,CAASP,KAArB;EACD,CAFD;AAGD,CALM;AAOP;AACA;AACA;AACA;AACA;;AACO,IAAMQ,oBAAoB,GAAG,SAAvBA,oBAAuB,CAAChB,GAAD,EAAS;EAC3C,IAAMC,MAAM,GAAGC,QAAQ,CAACC,aAAT,CAAuB,aAAvB,CAAf;EACAc,iBAAiB;;EACjBhB,MAAM,CAACI,OAAP,GAAiB,UAACC,CAAD,EAAO;IACtBV,yDAAM,CAACI,GAAD,CAAN;EACD,CAFD;AAGD,CANM;AAQP;AACA;AACA;AACA;AACA;;AACO,IAAMkB,kBAAkB,GAAG,SAArBA,kBAAqB,CAAClB,GAAD,EAAS;EACzC,IAAMC,MAAM,GAAGC,QAAQ,CAACC,aAAT,CAAuB,WAAvB,CAAf;;EACAF,MAAM,CAACI,OAAP,GAAiB,UAACC,CAAD,EAAO;IACtB,IAAMC,KAAK,GAAGL,QAAQ,CAACC,aAAT,CAAuB,aAAvB,CAAd;;IACA,IAAI,CAACI,KAAK,CAACC,KAAN,CAAYC,IAAZ,EAAL,EAAyB;MACvB,IAAMC,QAAQ,GAAGR,QAAQ,CAACC,aAAT,CAAuB,qBAAvB,CAAjB;MACAO,QAAQ,CAACC,WAAT,GAAuB,sBAAvB;IACD,CAHD,MAGOd,uDAAI,CAACG,GAAD,CAAJ;EACR,CAND;AAOD,CATM;AAWP;AACA;AACA;AACA;AACA;;AACO,IAAMiB,iBAAiB,GAAG,SAApBA,iBAAoB,GAAM;EACrC,IAAMV,KAAK,GAAGL,QAAQ,CAACC,aAAT,CAAuB,aAAvB,CAAd;EACAI,KAAK,CAACK,gBAAN,CAAuB,QAAvB,EAAiC,UAACN,CAAD,EAAO;IACtCO,OAAO,CAACC,GAAR,CAAYR,CAAC,CAACS,MAAF,CAASP,KAArB;EACD,CAFD;AAGD,CALM;AAOP;AACA;AACA;AACA;AACA;;AACO,IAAMW,qBAAqB,GAAG,SAAxBA,qBAAwB,CAACnB,GAAD,EAAS;EAC5C,IAAMC,MAAM,GAAGC,QAAQ,CAACC,aAAT,CAAuB,cAAvB,CAAf;;EACAF,MAAM,CAACI,OAAP,GAAiB,UAACC,CAAD,EAAO;IACtBR,2DAAQ,CAACE,GAAD,CAAR;EACD,CAFD;AAGD,CALM;;;;;;;;;;;;;;;;;;AC7EP;AACA;AAMA,IAAMoB,IAAI,GAAG,8BAAb;AAEA;AACA;AACA;AACA;AACA;AACA;;AACO,IAAMtB,QAAQ,GAAG,SAAXA,QAAW,CAACE,GAAD,EAAS;EAC/BqB,KAAK,WAAID,IAAJ,YAAiB;IACpBE,OAAO,EAAE;MACP,gBAAgB;IADT,CADW;IAIpBC,MAAM,EAAE;EAJY,CAAjB,CAAL,CAKGC,IALH,CAKQ,UAACC,QAAD;IAAA,OACNA,QAAQ,CAACC,IAAT,GAAgBF,IAAhB,CAAqB,UAACG,GAAD,EAAS;MAC5B3B,GAAG,CAAC4B,SAAJ,GAAgBD,GAAG,CAACE,IAApB;;MACA,IAAIF,GAAG,CAACG,IAAJ,KAAa,OAAjB,EAA0B;QACxB/B,kEAAmB,CAACC,GAAD,CAAnB;MACD,CAFD,MAEO,IAAI2B,GAAG,CAACG,IAAJ,KAAa,MAAjB,EAAyB;QAC9Bd,mEAAoB,CAAChB,GAAD,CAApB;QACAkB,iEAAkB,CAAClB,GAAD,CAAlB;QACAmB,oEAAqB,CAACnB,GAAD,CAArB;MACD;IACF,CATD,CADM;EAAA,CALR;AAiBD,CAlBM;AAoBP;AACA;AACA;AACA;AACA;;AAEO,IAAML,KAAK,GAAG,SAARA,KAAQ,CAACK,GAAD,EAAS;EAC5B,IAAMO,KAAK,GAAGL,QAAQ,CAACC,aAAT,CAAuB,iBAAvB,CAAd;EAEAkB,KAAK,WAAID,IAAJ,aAAkB;IACrBE,OAAO,EAAE;MACP,gBAAgB;IADT,CADY;IAIrBC,MAAM,EAAE,MAJa;IAKrBQ,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAe;MAAEC,QAAQ,EAAE3B,KAAK,CAACC;IAAlB,CAAf;EALe,CAAlB,CAAL,CAMGgB,IANH,CAMQ,UAACC,QAAD;IAAA,OACNA,QAAQ,CAACC,IAAT,GAAgBF,IAAhB,CAAqB,UAACG,GAAD,EAAS;MAC5B3B,GAAG,CAAC4B,SAAJ,GAAgBD,GAAG,CAACE,IAApB;;MACA,IAAIF,GAAG,CAACG,IAAJ,KAAa,OAAjB,EAA0B;QACxB/B,kEAAmB,CAACC,GAAD,CAAnB;QACA,IAAMU,QAAQ,GAAGR,QAAQ,CAACC,aAAT,CAAuB,yBAAvB,CAAjB;QACA,IAAIsB,QAAQ,CAACU,MAAT,KAAoB,GAAxB,EAA6BzB,QAAQ,CAACC,WAAT,GAAuBc,QAAQ,CAACW,UAAhC;MAC9B,CAJD,MAIO,IAAIT,GAAG,CAACG,IAAJ,KAAa,MAAjB,EAAyB;QAC9Bd,mEAAoB,CAAChB,GAAD,CAApB;QACAkB,iEAAkB,CAAClB,GAAD,CAAlB;QACAmB,oEAAqB,CAACnB,GAAD,CAArB;MACD;IACF,CAXD,CADM;EAAA,CANR;AAoBD,CAvBM;AAyBP;AACA;AACA;AACA;AACA;;AACO,IAAMH,IAAI,GAAG,SAAPA,IAAO,CAACG,GAAD,EAAS;EAC3B,IAAMqC,IAAI,GAAGnC,QAAQ,CAACC,aAAT,CAAuB,aAAvB,CAAb;EACA,IAAM+B,QAAQ,GAAGhC,QAAQ,CAACC,aAAT,CAAuB,eAAvB,CAAjB;EAEAkB,KAAK,WAAID,IAAJ,YAAiB;IACpBE,OAAO,EAAE;MACP,gBAAgB;IADT,CADW;IAIpBC,MAAM,EAAE,MAJY;IAKpBQ,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAe;MAAEK,MAAM,EAAEJ,QAAQ,CAAC1B,KAAnB;MAA0B6B,IAAI,EAAEA,IAAI,CAAC7B;IAArC,CAAf;EALc,CAAjB,CAAL,CAMGgB,IANH,CAMQ,UAACC,QAAD;IAAA,OACNA,QAAQ,CAACC,IAAT,GAAgBF,IAAhB,CAAqB,UAACG,GAAD,EAAS;MAC5B3B,GAAG,CAAC4B,SAAJ,GAAgBD,GAAG,CAACE,IAApB;MACA,IAAIF,GAAG,CAACG,IAAJ,KAAa,OAAjB,EAA0B/B,kEAAmB,CAACC,GAAD,CAAnB,CAA1B,KACK,IAAI2B,GAAG,CAACG,IAAJ,KAAa,MAAjB,EAAyB;QAC5Bd,mEAAoB,CAAChB,GAAD,CAApB;QACAkB,iEAAkB,CAAClB,GAAD,CAAlB;QACAmB,oEAAqB,CAACnB,GAAD,CAArB;MACD;IACF,CARD,CADM;EAAA,CANR;AAiBD,CArBM;AAuBP;AACA;AACA;AACA;AACA;;AACO,IAAMJ,MAAM,GAAG,SAATA,MAAS,CAACI,GAAD,EAAS;EAC7BqB,KAAK,WAAID,IAAJ,cAAmB;IACtBE,OAAO,EAAE;MACP,gBAAgB;IADT,CADa;IAItBC,MAAM,EAAE;EAJc,CAAnB,CAAL,CAKGC,IALH,CAKQ,UAACC,QAAD;IAAA,OACNA,QAAQ,CAACC,IAAT,GAAgBF,IAAhB,CAAqB,UAACG,GAAD,EAAS;MAC5B3B,GAAG,CAAC4B,SAAJ,GAAgBD,GAAG,CAACE,IAApB;MACA,IAAIF,GAAG,CAACG,IAAJ,KAAa,OAAjB,EAA0B/B,kEAAmB,CAACC,GAAD,CAAnB,CAA1B,KACK,IAAI2B,GAAG,CAACG,IAAJ,KAAa,MAAjB,EAAyB;QAC5Bd,mEAAoB,CAAChB,GAAD,CAApB;QACAkB,iEAAkB,CAAClB,GAAD,CAAlB;QACAmB,oEAAqB,CAACnB,GAAD,CAArB;MACD;IACF,CARD,CADM;EAAA,CALR;AAgBD,CAjBM;;;;;;UCnGP;UACA;;UAEA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;;UAEA;UACA;;UAEA;UACA;UACA;;;;;WCtBA;WACA;WACA;WACA;WACA,yCAAyC,wCAAwC;WACjF;WACA;WACA;;;;;WCPA;;;;;WCAA;WACA;WACA;WACA,uDAAuD,iBAAiB;WACxE;WACA,gDAAgD,aAAa;WAC7D;;;;;;;;;;;;ACNA;AAEA,IAAMA,GAAG,GAAGE,QAAQ,CAACC,aAAT,CAAuB,MAAvB,CAAZ;AAEAL,2DAAQ,CAACE,GAAD,CAAR,C","sources":["webpack://js-chat/./src/listeners.js","webpack://js-chat/./src/service-calls.js","webpack://js-chat/webpack/bootstrap","webpack://js-chat/webpack/runtime/define property getters","webpack://js-chat/webpack/runtime/hasOwnProperty shorthand","webpack://js-chat/webpack/runtime/make namespace object","webpack://js-chat/./src/app.js"],"sourcesContent":["import { login, logout, send, loadPage } from \"./service-calls.js\";\n\n/**\n *\n * @param {*} app - body element\n * this util function adds event listener to login button\n */\nexport const addLoginButtonEvent = (app) => {\n  const button = document.querySelector(\".btn-login\");\n  addInputUsernameEvent();\n  button.onclick = (e) => {\n    const input = document.querySelector(\".input-username\");\n    if (!input.value.trim()) {\n      const errorMsg = document.querySelector(\".error-message-username\");\n      errorMsg.textContent = \"Invalid Username\";\n    } else login(app);\n  };\n};\n\n/**\n *\n * @param {*} app - body element\n * this util function adds event listener to username input\n */\nexport const addInputUsernameEvent = () => {\n  const input = document.querySelector(\".input-username\");\n  input.addEventListener(\"change\", (e) => {\n    console.log(e.target.value);\n  });\n};\n\n/**\n *\n * @param {*} app - body element\n * this util fucntion adds event listener to logout button\n */\nexport const addLogoutButtonEvent = (app) => {\n  const button = document.querySelector(\".btn-logout\");\n  addInputTextEvent();\n  button.onclick = (e) => {\n    logout(app);\n  };\n};\n\n/**\n *\n * @param {*} app - body element\n * this util fucntion adds event listener to send button\n */\nexport const addSendButtonEvent = (app) => {\n  const button = document.querySelector(\".btn-send\");\n  button.onclick = (e) => {\n    const input = document.querySelector(\".input-send\");\n    if (!input.value.trim()) {\n      const errorMsg = document.querySelector(\".error-message-text\");\n      errorMsg.textContent = \"Send a valid message\";\n    } else send(app);\n  };\n};\n\n/**\n *\n * @param {*} app - body element\n * this util fucntion adds event listener to message input\n */\nexport const addInputTextEvent = () => {\n  const input = document.querySelector(\".input-send\");\n  input.addEventListener(\"change\", (e) => {\n    console.log(e.target.value);\n  });\n};\n\n/**\n *\n * @param {*} app - body element\n * this util fucntion adds event listener to refresh button\n */\nexport const addRefreshButtonEvent = (app) => {\n  const button = document.querySelector(\".btn-refresh\");\n  button.onclick = (e) => {\n    loadPage(app);\n  };\n};\n","import { addLoginButtonEvent } from \"./listeners.js\";\nimport {\n  addLogoutButtonEvent,\n  addSendButtonEvent,\n  addRefreshButtonEvent,\n} from \"./listeners.js\";\n\nconst host = \"http://localhost:3000/api/v1\";\n\n/**\n *\n * @param {*} app - body element\n * Loads the page. If there is a session,\n * renders login page template otherwise renders home page template\n */\nexport const loadPage = (app) => {\n  fetch(`${host}/home`, {\n    headers: {\n      \"Content-Type\": \"application/json\",\n    },\n    method: \"GET\",\n  }).then((response) =>\n    response.json().then((obj) => {\n      app.innerHTML = obj.html;\n      if (obj.page === \"login\") {\n        addLoginButtonEvent(app);\n      } else if (obj.page === \"home\") {\n        addLogoutButtonEvent(app);\n        addSendButtonEvent(app);\n        addRefreshButtonEvent(app);\n      }\n    })\n  );\n};\n\n/**\n *\n * @param {*} app - body element\n * POST request api call to /api/v1/login endpoint. Triggers on user login.\n */\n\nexport const login = (app) => {\n  const input = document.querySelector(\".input-username\");\n\n  fetch(`${host}/login`, {\n    headers: {\n      \"Content-Type\": \"application/json\",\n    },\n    method: \"POST\",\n    body: JSON.stringify({ username: input.value }),\n  }).then((response) =>\n    response.json().then((obj) => {\n      app.innerHTML = obj.html;\n      if (obj.page === \"login\") {\n        addLoginButtonEvent(app);\n        const errorMsg = document.querySelector(\".error-message-username\");\n        if (response.status === 403) errorMsg.textContent = response.statusText;\n      } else if (obj.page === \"home\") {\n        addLogoutButtonEvent(app);\n        addSendButtonEvent(app);\n        addRefreshButtonEvent(app);\n      }\n    })\n  );\n};\n\n/**\n *\n * @param {*} app - body element\n * POST request api call to create a new message and add it to the list\n */\nexport const send = (app) => {\n  const text = document.querySelector(\".input-send\");\n  const username = document.querySelector(\".current-user\");\n\n  fetch(`${host}/send`, {\n    headers: {\n      \"Content-Type\": \"application/json\",\n    },\n    method: \"POST\",\n    body: JSON.stringify({ sender: username.value, text: text.value }),\n  }).then((response) =>\n    response.json().then((obj) => {\n      app.innerHTML = obj.html;\n      if (obj.page === \"login\") addLoginButtonEvent(app);\n      else if (obj.page === \"home\") {\n        addLogoutButtonEvent(app);\n        addSendButtonEvent(app);\n        addRefreshButtonEvent(app);\n      }\n    })\n  );\n};\n\n/**\n *\n * @param {*} app - body element\n * GET request api call to logout the user and delete the session cookie\n */\nexport const logout = (app) => {\n  fetch(`${host}/logout`, {\n    headers: {\n      \"Content-Type\": \"application/json\",\n    },\n    method: \"GET\",\n  }).then((response) =>\n    response.json().then((obj) => {\n      app.innerHTML = obj.html;\n      if (obj.page === \"login\") addLoginButtonEvent(app);\n      else if (obj.page === \"home\") {\n        addLogoutButtonEvent(app);\n        addSendButtonEvent(app);\n        addRefreshButtonEvent(app);\n      }\n    })\n  );\n};\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","import { loadPage } from \"./service-calls.js\";\n\nconst app = document.querySelector(\"body\");\n\nloadPage(app);\n"],"names":["login","logout","send","loadPage","addLoginButtonEvent","app","button","document","querySelector","addInputUsernameEvent","onclick","e","input","value","trim","errorMsg","textContent","addEventListener","console","log","target","addLogoutButtonEvent","addInputTextEvent","addSendButtonEvent","addRefreshButtonEvent","host","fetch","headers","method","then","response","json","obj","innerHTML","html","page","body","JSON","stringify","username","status","statusText","text","sender"],"sourceRoot":""}